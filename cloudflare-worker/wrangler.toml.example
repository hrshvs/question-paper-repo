name = "qpr-contribution-worker"
main = "src/index.js"
compatibility_date = "2024-01-01"

# =============================================================================
# ENVIRONMENT VARIABLES CONFIGURATION
# =============================================================================
#
# This worker supports dual authentication:
# 1. Firebase Google Auth (Primary - for IISER students)
# 2. GitHub OAuth (Fallback - for external contributors)
#
# =============================================================================

# -----------------------------------------------------------------------------
# SECRETS (Add using: wrangler secret put SECRET_NAME)
# -----------------------------------------------------------------------------
#
# For GitHub OAuth (Fallback System):
#   GITHUB_CLIENT_ID          - Your GitHub OAuth App Client ID
#   GITHUB_CLIENT_SECRET      - Your GitHub OAuth App Client Secret
#
# For GitHub App (Primary System - Direct Contributions):
#   GITHUB_APP_ID             - GitHub App ID (e.g., "123456")
#   GITHUB_APP_PRIVATE_KEY    - GitHub App Private Key (full PEM format)
#                               Include "-----BEGIN RSA PRIVATE KEY-----" headers
#                               For multiline, use: wrangler secret put GITHUB_APP_PRIVATE_KEY
#   GITHUB_APP_INSTALLATION_ID - Installation ID for your repo
#
# -----------------------------------------------------------------------------

[vars]
# Repository Configuration
GITHUB_REPO_OWNER = "IISERM"
GITHUB_REPO_NAME = "question-paper-repo"

# Frontend URL (where the docs are hosted)
FRONTEND_URL = "https://iiserm.github.io"

# Domain restriction for Google Auth
ALLOWED_EMAIL_DOMAIN = "iisermohali.ac.in"

# =============================================================================
# DEPLOYMENT COMMANDS
# =============================================================================
#
# 1. First time setup - add secrets:
#    wrangler secret put GITHUB_CLIENT_ID
#    wrangler secret put GITHUB_CLIENT_SECRET
#    wrangler secret put GITHUB_APP_ID
#    wrangler secret put GITHUB_APP_PRIVATE_KEY
#    wrangler secret put GITHUB_APP_INSTALLATION_ID
#
# 2. Deploy the worker:
#    wrangler deploy
#
# 3. View logs:
#    wrangler tail
#
# =============================================================================

